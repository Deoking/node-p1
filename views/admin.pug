extends layout

block content
    script.
        $(document).ready(function () {
            var socket = io();
            //id 입력
            $('#apply').on('click', function () {

                var inputName = $('#username').val();

                if (inputName) {
                    socket.emit('login', {
                        name: inputName,
                        role: 'administrator'
                    });
                    $('#connectUser').removeClass('display-none');
                } else {
                    alert('Please enter your account.');
                    return false;
                }
            });

            //사용자접속
            socket.on('notifyUserLoginToAdmin', function (data) {
                console.log('notifyUserLoginToAdmin');
                addUserToList(data);
            });

            //접속중인 사용자 가져오기
            socket.on('notifyUserLoginListToAdmin', function (data) {
                for(var i=0; i<data.length; i++){
                    addUserToList(data[i]);
                }
            });

        });

        //사용자를 접속사용자 리스트에 추가
        function addUserToList(data) {
            console.log(data);
            var p = $('<p></p>');

            p.attr('id', data.socketId);
            p.addClass('connect-users-item');
            p.html(data.name);

            p.on('click', function () {
                console.log($(this).attr('id'));
            });

            $('#connectUserList').append(p);
        }

    h1= title
    .idform
        p Please enter your account.
        input#username(type='text')
        button#apply submit
        .display-none#connectUser
            p Connect user List
            .connect-users#connectUserList
